(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(1573)}])},1573:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return A}});var d=c(5893),e=c(5675),f=c.n(e),g=c(603),h=c(7568),i=c(4051),j=c.n(i),k=c(7294),l={OPERATIONAL:"operational",PARTIAL_OUTAGE:"partial_outage",OUTAGE:"outage",UNKNOWN:"unknown"};function m(a){return n.apply(this,arguments)}function n(){return(n=(0,h.Z)(j().mark(function a(b){var c,d,e,f,h,i;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://raw.githubusercontent.com/mehatab/fettle/main/public/status/".concat(b,"_report.log"));case 2:return c=a.sent,a.next=5,c.text();case 5:return e=(d=a.sent).split("\n"),f=[],h=[],e.forEach(function(a){var b=(0,g.Z)(a.split(", "),3),c=b[0],d=b[1],e=b[2];f.push({id:c,response_time:e,status:d,created_at:c})}),(i=Object.values(f.reduce(function(a,b){var c=(0,g.Z)(b.created_at.substr(0,10).split("-"),3),d=c[0],e=c[1],f=c[2],h="".concat(f,"_").concat(e,"_").concat(d);return a[h]=a[h]||{date:b.created_at,logs:[]},a[h].logs.push(b),a},{}))).forEach(function(a){var b=0;a.logs.forEach(function(a){a.response_time&&(b+=Number(a.response_time.replaceAll("s","")))});var c="";c=0===a.logs.length?"unknown":a.logs.every(function(a){return"success"===a.status})?l.OPERATIONAL:a.logs.every(function(a){return"failed"===a.status})?l.OUTAGE:l.PARTIAL_OUTAGE,h.push({avg_response_time:b/a.logs.length,current_status:a.logs[a.logs.length-1].status,date:a.date.substr(0,10),status:c})}),a.abrupt("return",o(h));case 13:case"end":return a.stop()}},a)}))).apply(this,arguments)}function o(a){for(var b=function(){var b=new Date(d.getFullYear(),d.getMonth(),d.getDate()-e),f=a.find(function(a){return a.date===b.toISOString().substr(0,10)});c.push({avg_response_time:(null==f?void 0:f.avg_response_time)||0,current_status:(null==f?void 0:f.current_status)||"unknown",date:b.toISOString().substr(0,10),status:(null==f?void 0:f.status)||"unknown"})},c=[],d=new Date,e=-1;e<89;e+=1)b();return c.reverse()}var p=function(){var a=(0,k.useState)([]),b=a[0],c=a[1],d=(0,k.useState)(!1),e=d[0],f=d[1],i=(0,k.useState)(),l=i[0],n=i[1];return(0,k.useEffect)(function(){var a;(a=(0,h.Z)(j().mark(function a(){var b,d,e,h,i,k,l,o,p,q;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return f(!0),a.prev=1,a.next=4,fetch("./urls.cfg");case 4:return b=a.sent,a.next=7,b.text();case 7:e=(d=a.sent).split("\n"),h=[],i=0;case 11:if(!(i<e.length)){a.next=23;break}if(k=e[i],o=(l=(0,g.Z)(k.split("="),2))[0],p=l[1],!(!o||!p)){a.next=16;break}return a.abrupt("continue",20);case 16:return a.next=18,m(o);case 18:(q=a.sent).length>0?h.push({id:i,name:o,status:q[q.length-1].status,logs:q}):h.push({id:i,name:o,status:"unknown",logs:q});case 20:i++,a.next=11;break;case 23:c(h),a.next=29;break;case 26:a.prev=26,a.t0=a.catch(1),n(a.t0);case 29:return a.prev=29,f(!1),a.finish(29);case 32:case"end":return a.stop()}},a,null,[[1,26,29,32]])})),function(){return a.apply(this,arguments)})()},[]),[b,e,l]},q=function(a){var b=a.item,c=a.show;return(0,d.jsx)(d.Fragment,{children:c&&(0,d.jsxs)("div",{className:"absolute card mt-10 pl-5 pr-5",children:[(0,d.jsxs)("p",{children:["Date: ",b.date]}),(0,d.jsxs)("p",{children:["Status: ",b.status]})]})})},r=function(a){var b=a.item,c=(0,k.useState)(!1),e=c[0],f=c[1];return(0,d.jsx)(d.Fragment,{children:function(a){switch(a){case"unknown":return(0,d.jsx)("div",{onMouseOver:function(){return f(!0)},onMouseLeave:function(){return f(!1)},className:"bg-gray-300 ml-0.5 sm:rounded-lg flex-1 h-8",children:(0,d.jsx)(q,{item:b,show:e})});case l.OUTAGE:return(0,d.jsx)("div",{onMouseOver:function(){return f(!0)},onMouseLeave:function(){return f(!1)},className:"bg-red-500 ml-0.5 sm:rounded-lg flex-1 h-8",children:(0,d.jsx)(q,{item:b,show:e})});case l.PARTIAL_OUTAGE:return(0,d.jsx)("div",{onMouseOver:function(){return f(!0)},onMouseLeave:function(){return f(!1)},className:"bg-orange-300 ml-0.5 sm:rounded-lg flex-1 h-8",children:(0,d.jsx)(q,{item:b,show:e})});default:return(0,d.jsx)("div",{onMouseOver:function(){return f(!0)},onMouseLeave:function(){return f(!1)},className:"bg-green-500 ml-0.5 sm:rounded-lg flex-1 h-8",children:(0,d.jsx)(q,{item:b,show:e})})}}(b.status)})},s=function(a){var b=a.item,c=function(){return(null==b?void 0:b.status)===l.OPERATIONAL?(0,d.jsxs)("svg",{className:"h-6 w-6 flex-none fill-sky-100 stroke-green-500 stroke-2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"11"}),(0,d.jsx)("path",{d:"m8 13 2.165 2.165a1 1 0 0 0 1.521-.126L16 9",fill:"none"})]}):(null==b?void 0:b.status)===l.PARTIAL_OUTAGE?(0,d.jsx)("svg",{className:"h-8 w-8 flex-none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"orange",children:(0,d.jsx)("path",{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm0 319.91a20 20 0 1 1 20-20 20 20 0 0 1-20 20zm21.72-201.15-5.74 122a16 16 0 0 1-32 0l-5.74-121.94v-.05a21.74 21.74 0 1 1 43.44 0z"})}):(null==b?void 0:b.status)===l.OUTAGE?(0,d.jsx)("svg",{className:"h-8 w-8 flex-none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"red",children:(0,d.jsx)("path",{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm0 319.91a20 20 0 1 1 20-20 20 20 0 0 1-20 20zm21.72-201.15-5.74 122a16 16 0 0 1-32 0l-5.74-121.94v-.05a21.74 21.74 0 1 1 43.44 0z"})}):(0,d.jsxs)("svg",{className:"h-6 w-6 flex-none fill-sky-100 stroke-green-500 stroke-2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"11"}),(0,d.jsx)("path",{d:"m8 13 2.165 2.165a1 1 0 0 0 1.521-.126L16 9",fill:"none"})]})};return(0,d.jsxs)("div",{className:"mb-10",children:[(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)(c,{}),(0,d.jsxs)("div",{className:"w-full flex justify-between items-baseline",children:[(0,d.jsx)("p",{className:"ml-4 text-base font-semibold leading-6 text-gray-900",children:b.name}),(0,d.jsxs)("p",{className:"text-xs text-gray-400 items-baseline self-baseline",children:[" ",Math.round(100*b.logs.filter(function(a){return a.status===l.OPERATIONAL}).length/90),"% operational in last 90 days"]})]})]}),(0,d.jsx)("div",{className:"flex mt-2",children:(b.logs||[]).map(function(a){return(0,d.jsx)(r,{item:a},a.date)})})]})};function t(a){var b=[],c=["January","February","March","April","May","June","July","August","September","October","November","December"];return Object.values(a.reduce(function(a,b){var d=(0,g.Z)(b.created_at.substr(0,10).split("-"),3),e=d[0],f=d[1];d[2];var h="".concat(e,"_").concat(f);return a[h]=a[h]||{month:"".concat(c[parseInt(f)-1]," ").concat(e),incidents:[]},a[h].incidents.push(b),console.log("issues",a),a},{})).forEach(function(a){b.push({month:a.month,incidents:a.incidents})}),b}var u=function(){var a=(0,k.useState)([]),b=a[0],c=a[1],d=(0,k.useState)(!1),e=d[0],f=d[1],g=(0,k.useState)(),i=g[0],l=g[1];return(0,k.useEffect)(function(){var a;(a=(0,h.Z)(j().mark(function a(){var b,d,e;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return f(!0),a.prev=1,a.next=4,fetch("https://api.github.com/repos/mehatab/fettle/issues?per_page=20&state=all&labels=incident");case 4:return b=a.sent,a.next=7,b.json();case 7:d=a.sent,console.log("issues",d),e=t(d.map(function(a){return{id:a.id,title:a.title,desciption:a.body,status:a.state,created_at:a.created_at,closed_at:a.closed_at,labels:a.labels.map(function(a){return a.name})}})),console.log("issues",e),c(e),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(1),l(a.t0);case 17:return a.prev=17,f(!1),a.finish(17);case 20:case"end":return a.stop()}},a,null,[[1,14,17,20]])})),function(){return a.apply(this,arguments)})()},[]),[b,e,i]},v=function(){var a=(0,g.Z)(u(),2),b=a[0],c=a[1],e=function(a){return new Date(a).toLocaleString([],{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})};return(0,d.jsx)("div",{className:"mt-5",children:c?(0,d.jsx)("p",{children:"Loading..."}):(0,d.jsx)("div",{children:b.map(function(a){return(0,d.jsxs)("div",{className:"mb-10",children:[(0,d.jsx)("p",{className:"mr-5 text-2xl font-semibold leading-6 text-gray-900",children:a.month}),(0,d.jsx)("div",{className:"mt-2 flex-1 h-px bg-gray-300"}),(0,d.jsx)("div",{className:"ml-6 border-l-4",children:a.incidents.map(function(a){return(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)("div",{className:"-ml-4 mt-6 flex rounded-full w-7 h-7 bg-gray-300",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"17",viewBox:"0 0 14 14",fill:"none",className:"m-auto fill-gray-500 text-disrupted",children:(0,d.jsx)("path",{d:"M6.99999 2.3C10.14 2.3 12.7 4.86 12.7 8C12.7 11.14 10.14 13.7 6.99999 13.7C3.85999 13.7 1.29999 11.14 1.29999 8C1.29999 4.86 3.85999 2.3 6.99999 2.3ZM7 1C3.14 1 0 4.14 0 8C0 11.86 3.14 15 7 15C10.86 15 14 11.86 14 8C14 4.14 10.86 1 7 1ZM8 4H6V9H8V4ZM8 10H6V12H8V10Z"})})}),(0,d.jsxs)("div",{className:"items-center ml-3 mt-6",children:[(0,d.jsx)("p",{className:"text-base font-semibold leading-6 text-gray-900",children:a.title}),"closed"===a.status?(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"This incident has been resolved."}),(0,d.jsxs)("p",{className:"text-sm text-gray-500",children:[e(a.created_at)," -"," ",e(a.closed_at)]})]}):(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"This incident is currently being investigated."}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:e(a.created_at)})]})]})]},a.id)})})]},a.month)})})})};function w(a){return x.apply(this,arguments)}function x(){return(x=(0,h.Z)(j().mark(function a(b){var c,d,e,f,h,i,k,l;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://raw.githubusercontent.com/mehatab/fettle/main/public/status/".concat(b,"_report.log"));case 2:return c=a.sent,a.next=5,c.text();case 5:return e=(d=a.sent).split("\n"),a.prev=7,f=e[e.length-2],i=(h=(0,g.Z)(f.split(", "),3))[0],k=h[1],l=h[2],a.abrupt("return",{name:b,status:k,date:i});case 13:return a.prev=13,a.t0=a.catch(7),a.abrupt("return",{name:b,status:"unknown",date:void 0});case 16:case"end":return a.stop()}},a,null,[[7,13]])}))).apply(this,arguments)}var y=function(){var a=(0,k.useState)(),b=a[0],c=a[1],d=(0,k.useState)(!1),e=d[0],f=d[1],i=(0,k.useState)(),m=i[0],n=i[1];return(0,k.useEffect)(function(){var a;(a=(0,h.Z)(j().mark(function a(){var b,d,e,h,i,k,m,o,p,q;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return f(!0),a.prev=1,a.next=4,fetch("./urls.cfg");case 4:return b=a.sent,a.next=7,b.text();case 7:e=(d=a.sent).split("\n"),h=[],i=0;case 11:if(!(i<e.length)){a.next=23;break}if(k=e[i],o=(m=(0,g.Z)(k.split("="),2))[0],p=m[1],!(!o||!p)){a.next=16;break}return a.abrupt("continue",20);case 16:return a.next=18,w(o);case 18:q=a.sent,h.push(q);case 20:i++,a.next=11;break;case 23:h.every(function(a){return"success"===a.status})?c({title:"All System Operational",status:l.OPERATIONAL,datetime:h[0].date}):h.every(function(a){return"failed"===a.status})?c({title:"Outage",status:l.OUTAGE,datetime:h[0].date}):h.every(function(a){return""===a.status})?c({title:"Unknown",status:l.UNKNOWN,datetime:h[0].date}):c({title:"Partial Outage",status:l.PARTIAL_OUTAGE,datetime:h[0].date}),a.next=29;break;case 26:a.prev=26,a.t0=a.catch(1),n(a.t0);case 29:return a.prev=29,f(!1),a.finish(29);case 32:case"end":return a.stop()}},a,null,[[1,26,29,32]])})),function(){return a.apply(this,arguments)})()},[]),{systemStatus:b,isLoading:e,error:m}},z=function(){var a=(0,g.Z)(p(),2),b=a[0],c=a[1],e=y(),f=e.systemStatus;e.isLoading;var h=function(){return(null==f?void 0:f.status)===l.OPERATIONAL?(0,d.jsxs)("svg",{className:"h-6 w-6 flex-none fill-sky-100 stroke-green-500 stroke-2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"11"}),(0,d.jsx)("path",{d:"m8 13 2.165 2.165a1 1 0 0 0 1.521-.126L16 9",fill:"none"})]}):(null==f?void 0:f.status)===l.PARTIAL_OUTAGE?(0,d.jsx)("svg",{className:"h-8 w-8 flex-none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"orange",children:(0,d.jsx)("path",{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm0 319.91a20 20 0 1 1 20-20 20 20 0 0 1-20 20zm21.72-201.15-5.74 122a16 16 0 0 1-32 0l-5.74-121.94v-.05a21.74 21.74 0 1 1 43.44 0z"})}):(null==f?void 0:f.status)===l.OUTAGE?(0,d.jsx)("svg",{className:"h-8 w-8 flex-none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"red",children:(0,d.jsx)("path",{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm0 319.91a20 20 0 1 1 20-20 20 20 0 0 1-20 20zm21.72-201.15-5.74 122a16 16 0 0 1-32 0l-5.74-121.94v-.05a21.74 21.74 0 1 1 43.44 0z"})}):(0,d.jsxs)("svg",{className:"h-6 w-6 flex-none fill-sky-100 stroke-green-500 stroke-2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"11"}),(0,d.jsx)("path",{d:"m8 13 2.165 2.165a1 1 0 0 0 1.521-.126L16 9",fill:"none"})]})};return(0,d.jsxs)("div",{className:"mt-10",children:[(0,d.jsx)("div",{className:"mx-px md:ml-80 md:mr-80 bg-white dark:bg-slate-800 rounded-xl card",children:(0,d.jsxs)("div",{className:"w-full flex justify-between pt-2 pl-6 pr-6 pb-2",children:[(0,d.jsxs)("div",{className:"flex items-center sm:text-xl text-xs font-semibold leading-7",children:[(0,d.jsx)(h,{}),(0,d.jsx)("p",{className:"ml-3 text-gray-900",children:null==f?void 0:f.title})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"Last updated"}),(0,d.jsx)("p",{className:"text-xs text-gray-400 text-end ",children:null==f?void 0:f.datetime})]})]})}),(0,d.jsxs)("div",{className:"mx-px mt-10 md:ml-60 md:mr-60",children:[(0,d.jsx)("div",{className:"card-body",children:c?(0,d.jsx)("p",{children:"Loading..."}):(0,d.jsx)("ul",{children:b.map(function(a){return(0,d.jsx)(s,{item:a},a.id)})})}),(0,d.jsx)("p",{className:"mt-10 sm:text-lg text-base font-semibold leading-7 text-gray-900",children:"Recent incident"}),(0,d.jsx)(v,{})]})]})},A=function(){return(0,d.jsxs)("div",{className:"h-full w-full ",children:[(0,d.jsx)("div",{className:"mt-20 absolute inset-0 bg-[url(/grid.svg)] bg-center [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))]"}),(0,d.jsx)("div",{className:"w-full h-40 absolute bg-light-purple dark:purple dark:bg-black",children:(0,d.jsx)("div",{className:"sm:ml-0 ml-5 mr-0 mt-3 md:pl-80 md:pr-80 sm:w-full h-full bg-purple-500 dark:bg-black",children:(0,d.jsx)(f(),{src:"/vercel.svg",width:150,height:100,className:"w-40 h-16",alt:"Tailwind Play"})})}),(0,d.jsx)("div",{className:"mt-20 w-full absolute overflow-scroll ",children:(0,d.jsx)(z,{})})]})}}},function(a){a.O(0,[422,774,888,179],function(){var b;return a(a.s=8312)}),_N_E=a.O()}])